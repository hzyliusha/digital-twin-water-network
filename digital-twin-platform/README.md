# 大坝数字孪生系统

这是一个基于Python的大坝数字孪生系统演示项目，基于富水水库案例模拟，实现了从传感器数据采集、边缘计算到云端分析的完整流程。

## 系统架构

```
[大坝传感器] -> [无线网络] -> [边缘服务器] -> [云数据中心] -> [可视化系统]
```

## 主要组件

1. **传感器模拟器** (`dam_sensors.py`): 模拟大坝上的各类传感器数据
2. **边缘服务器** (`edge_server.py`): 接收传感器数据，进行初步处理并转发到云端
3. **云数据中心** (`cloud_server.py`): 存储和分析数据，提供可视化界面
4. **系统启动脚本** (`start_system.py`): 一键启动整个系统
5. **数据库初始化脚本** (`init_database.py`): 初始化所需的数据库
6. **配置文件** (`config.json`): 系统配置参数

## 安装与启动

### 环境准备

```bash
# 安装Python依赖
python install_requirements.py

# 初始化数据库
python init_database.py
```

### 启动系统

```bash
# 方式1: 使用启动脚本
python start_system.py

# 方式2: 分别启动各个组件
python cloud_server.py      # 启动云数据中心 (端口8002)
python edge_server.py       # 启动边缘服务器 (端口8001)
python dam_sensors.py       # 启动传感器模拟器
```

## 系统访问

- **可视化仪表板**: http://localhost:8002/dashboard
- **边缘服务器状态**: http://localhost:8001/status
- **云端API**: http://localhost:8002/api/dashboard_data

## 系统特性

### 传感器模拟器
- 模拟水位、压力、流量、温度、位移、渗流等多种传感器
- 支持数据异常模拟和状态检测
- 通过HTTP协议模拟无线网络传输

### 边缘服务器
- 数据接收、存储和预处理
- 异常检测和健康评分计算
- 批量数据转发到云端
- 本地数据缓存和容错处理

### 云数据中心
- 大规模数据存储和管理
- 智能数据分析和风险评估
- 实时可视化监控界面
- 自动化运维建议生成

## 监控指标
- **水位监控**: 正常(<90m), 预警(90-95m), 危险(>95m)
- **压力监控**: 正常(<140kPa), 预警(140-160kPa), 危险(>160kPa)
- **流量监控**: 正常(<200m³/s), 预警(200-250m³/s), 危险(>250m³/s)
- **健康指数**: 0-100分综合评估
- **异常检测**: 自动识别设备异常和环境变化

## 数据流程
1. 传感器每5秒生成一次模拟数据
2. 数据通过无线网络发送到边缘服务器
3. 边缘服务器进行数据预处理和异常检测
4. 每30秒将批量数据上传到云数据中心
5. 云端进行深度分析并更新可视化界面

## 系统扩展
这个系统提供了数字孪生的基础架构，可以根据实际需求进行扩展：
- 添加更多类型的传感器
- 实现更复杂的数据分析算法
- 集成机器学习模型进行预测性维护
- 扩展可视化界面，支持3D模型展示 